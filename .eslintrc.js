module.exports = {
    parser: '@babel/eslint-parser',

    env: {
        'browser': true,
        'node': true,
        'amd': false,
        'es6': true,
    },

    globals: {
        'Raven': true,
        '$': true,
        'UnityLoader': false,
    },

    parserOptions: {
        'ecmaVersion': 6,
        'sourceType': 'module',
        'ecmaFeatures': {
            'modules': true,
            'jsx': true,
        },
    },

    plugins: [
        'react',
        'babel',
        'eslint-plugin-import-helpers',
        'react-hooks',
    ],

    overrides: [
        {
            'files': ['**/*.test.js', 'test/**/*.js', '__mocks__/**/*'],
            'env': {
                'jest': true,
            },
            'plugins': ['jest'],
            'globals': {
                'shallow': true,
                'render': true,
                'mount': true,
                'toJson': true,
                'shallowWithIntl': true,
                'mountWithIntl': true,
                'describe': true,
                'it': true,
            },
            'rules': {
                'max-nested-callbacks': [2, 10],
                'no-unused-expressions': 0,
                'camelcase': 0,

                'jest/no-disabled-tests': 'warn',
                'jest/no-focused-tests': 'error',
                'jest/no-identical-title': 'error',
                'jest/prefer-to-have-length': 'warn',
                'jest/valid-expect': 'error',
                'react/no-multi-comp': 0,
            },
        },
        {
            'files': ['**/*.ts', '**/*.tsx'],
            'parser': '@typescript-eslint/parser',
            'parserOptions': {
                'ecmaVersion': 7,
                'ecmaFeatures': {
                    'modules': true,
                },
                'sourceType': 'module',
            },
            'plugins': [
                'react',
                'babel',
                'eslint-plugin-import-helpers',
                '@typescript-eslint',
            ],
            'extends': [
                'eslint:recommended',
                'plugin:@typescript-eslint/eslint-recommended',
                'plugin:@typescript-eslint/recommended',
            ],
            'rules': {
                'no-unused-vars': 'off',
                'react/prop-types': 'off',
                '@typescript-eslint/no-unused-vars': [
                    2, { 'vars': 'all', 'args': 'after-used', 'ignoreRestSiblings': false },
                ],
                '@typescript-eslint/indent': 2,
                '@typescript-eslint/ban-ts-ignore': 0,
                '@typescript-eslint/ban-ts-comment': 0,
                '@typescript-eslint/explicit-function-return-type': 0,
                '@typescript-eslint/explicit-module-boundary-types': 0,
                '@typescript-eslint/no-non-null-assertion': 0,
                '@typescript-eslint/no-empty-interface': 0,
                '@typescript-eslint/no-confusing-void-expression': 0,
            },
        },
        {
            'files': '**/*.story.js',
            'rules': {
                'react/no-multi-comp': 0,
            },
        },
    ],

    rules: {
        'import-helpers/order-imports': [
            'error',
            {
                'newlinesBetween': 'always',
                'groups': [
                    'module',
                    '/^common.components/',
                    'parent',
                    'sibling',
                ],
                'alphabetize': { 'order': 'asc', 'ignoreCase': true },
            },
        ],
        'no-restricted-imports': ['error', { 'patterns': ['./src/*'] }],
        'no-cond-assign': 2,
        'no-console': ['error', { 'allow': ['error'] }],
        'no-constant-condition': 2,
        'comma-dangle': [2, 'always-multiline'],
        'no-control-regex': 2,
        'no-debugger': 2,
        'no-dupe-keys': 2,
        'no-empty': 2,
        'no-empty-character-class': 2,
        'no-ex-assign': 2,
        'no-extra-boolean-cast': 2,
        'no-extra-parens': 0,
        'no-extra-semi': 2,
        'no-func-assign': 2,
        'no-inner-declarations': 2,
        'no-invalid-regexp': 2,
        'no-multiple-empty-lines': ['error', { 'max': 1, 'maxEOF': 1 }],
        'no-negated-in-lhs': 2,
        'no-obj-calls': 2,
        'no-regex-spaces': 2,
        'no-sparse-arrays': 2,
        'no-unreachable': 2,
        'use-isnan': 2,
        'valid-jsdoc': 0,
        'valid-typeof': 2,

        'block-scoped-var': 2,
        'complexity': 0,
        'consistent-return': 2,
        'curly': 2,
        'object-curly-spacing': [1, 'always'],
        'default-case': 2,
        'dot-notation': 2,
        'eqeqeq': 2,
        'guard-for-in': 2,
        'no-alert': 2,
        'no-caller': 2,
        'no-div-regex': 2,
        'no-else-return': 2,
        'no-eq-null': 2,
        'no-eval': 2,
        'no-extend-native': 2,
        'no-fallthrough': 2,
        'no-floating-decimal': 2,
        'no-implied-eval': 2,
        'no-labels': 2,
        'no-iterator': 2,
        'no-lone-blocks': 2,
        'no-loop-func': 2,
        'no-multi-str': 2,
        'no-native-reassign': 2,
        'no-new': 2,
        'no-new-func': 2,
        'no-new-wrappers': 2,
        'no-octal': 2,
        'no-octal-escape': 2,
        'no-proto': 2,
        'no-redeclare': 2,
        'no-return-assign': 2,
        'no-script-url': 2,
        'no-self-compare': 2,
        'no-sequences': 2,
        'no-unused-expressions': 2,
        'no-warning-comments': 0,
        'no-with': 2,
        'radix': 2,
        'wrap-iife': 2,
        'yoda': 0,
        'indent': ['error', 4, { SwitchCase: 1 }],

        'no-global-strict': 0,
        'strict': [0, 'global'],

        'no-catch-shadow': 2,
        'no-delete-var': 2,
        'no-label-var': 2,
        'no-shadow': 'off',
        '@typescript-eslint/no-shadow': ['error'],
        'no-shadow-restricted-names': 2,
        'no-undef': 2,
        'no-undef-init': 2,
        'no-unused-vars': 2,
        'no-use-before-define': 0,

        'handle-callback-err': 1,
        'no-mixed-requires': 1,
        'no-new-require': 2,
        'no-path-concat': 0,
        'no-process-exit': 0,
        'no-restricted-modules': 0,
        'no-sync': 0,

        'brace-style': 2,
        'camelcase': 2,
        'consistent-this': [2, 'self'],
        'eol-last': 2,
        'func-names': 0,
        'func-style': [2, 'declaration', { 'allowArrowFunctions': true }],
        'new-cap': 0,
        'new-parens': 2,
        'no-nested-ternary': 2,
        'no-array-constructor': 0,
        'no-lonely-if': 2,
        'no-new-object': 2,
        'no-spaced-func': 0,
        'no-space-before-semi': 0,
        'no-ternary': 0,
        'no-trailing-spaces': 0,
        'no-underscore-dangle': 0,
        'no-wrap-func': 0,
        'no-mixed-spaces-and-tabs': 0,
        'quotes': [2, 'single'],
        'quote-props': 0,
        'semi': 2,
        'babel/semi': 2,
        'sort-vars': 2,
        'space-after-keywords': 0,
        'space-in-brackets': 0,
        'space-infix-ops': 0,
        'keyword-spacing': 0,
        'max-nested-callbacks': [2, 3],
        'one-var': 0,
        'wrap-regex': 0,

        'max-depth': [2, 4],
        'max-len': 0,
        'max-params': [2, 4],
        'max-statements': 0,
        'no-bitwise': 0,
        'no-plusplus': 2,

        'jsx-quotes': 2,

        'react/display-name': 0,
        'react/jsx-boolean-value': 0,
        'react/jsx-no-undef': 2,
        'react/jsx-sort-props': 2,
        'react/jsx-uses-react': 1,
        'react/jsx-uses-vars': 2,
        'react/no-did-mount-set-state': 2,
        'react/no-did-update-set-state': 2,
        'react/no-multi-comp': 2,
        'react/no-unknown-property': 2,
        'react/prop-types': 2,
        'react/react-in-jsx-scope': 2,
        'react/self-closing-comp': 2,
        'react/sort-comp': [2, {
            order: [
                'static-variables',
                'static-methods',
                'lifecycle',
                'everything-else',
                'render',
            ],
        }],
        'react/jsx-wrap-multilines': 2,
        'react/jsx-closing-bracket-location': [2, 'line-aligned'],
        'react/jsx-indent': 2,
        'react/jsx-indent-props': 2,
        'react-hooks/rules-of-hooks': 2,
        'react-hooks/exhaustive-deps': [1, {
            'enableDangerousAutofixThisMayCauseInfiniteLoops': true,
            'additionalHooks': '(useIsomorphicLayoutEffect)',
        }],
    },

    settings: {
        'react': {
            'pragma': 'React',
            'version': 'detect',
        },
    },
};
